<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Moe Project</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
	<!-- moeproject -->
	<link rel="stylesheet" type="text/css" href="src/moeproject.css" />
	<link rel="stylesheet" type="text/css" href="src/moequest.css" />
	<script src="src/moequest.js"></script>
	<link rel="stylesheet" type="text/css" href="src/moeillustra.css" />
	<script src="src/moeillustra.js"></script>
</head>
<body>
	<img src="resources/logo.jpeg" alt="logo" width="7%" height="7%" />
	<h2 id="heading">MoeGirl<br />Project</h2>
	<div id="sidebar">
		<ul>
			<li id="li-illustra" class="active">萌娘图鉴</li>
			<li id="li-quest">萌娘问答</li>
		</ul>
	</div>
	<div id="content">
		<div id="illustra" class="active"></div>
		<div id="ans" class="inactive"></div>
		<div id="quest" class="inactive"></div>
	</div>
</body>
<script>
$(function() {
	function run(choice) {
		var active = $("#sidebar ul .active");
		active.removeClass("active");
		$("#sidebar #li-" + choice).addClass("active");
		$("#content div").removeClass("active");
		$("#content div").addClass("inactive");
		$("#content div").hide();
		$("#content #" + choice).removeClass("inactive");
		$("#content #" + choice).addClass("active");
		$("#content #" + choice).show();
		switch (choice) {
		case "illustra":
			MOEILLUSTRA.run("illustra");
			break;
		case "quest":
			MOEQUEST.run("quest", "ans");
			break;
		default:
			console.warn("no active page", choice);
			break;
		}
	}
	$("#sidebar li").click(function () {
		run($(this).attr("id").substring(3));
	});
	var urlparam = function () {
		// This function is anonymous, is executed immediately and 
		// the return value is assigned to QueryString!
		var query_string = {};
		var query = window.location.search.substring(1);
		var vars = query.split("&");
		for (var i=0;i<vars.length;i++) {
			var pair = vars[i].split("=");
				// If first entry with this name
			if (typeof query_string[pair[0]] === "undefined") {
			  query_string[pair[0]] = pair[1];
				// If second entry with this name
			} else if (typeof query_string[pair[0]] === "string") {
			  var arr = [ query_string[pair[0]], pair[1] ];
			  query_string[pair[0]] = arr;
				// If third or later entry with this name
			} else {
			  query_string[pair[0]].push(pair[1]);
			}
		}
		return query_string;
	} ();
	if (undefined !== urlparam.status) {
		run(urlparam.status);
	} else {
		run($("#sidebar ul .active").attr("id").substring(3));
	}
});
</script>
</html>
